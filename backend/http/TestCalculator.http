@BASE_URL = http://localhost:8080
@JWT = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwZGRhZDNmZC1mZjhmLTRmNDQtODJmNS0xYzIwYWI1NGM1OTYiLCJpYXQiOjE3NjI0OTI4ODgsImV4cCI6MTc2MjU3OTI4OCwidXNlcm5hbWUiOiJuZXdhZG1pbjEiLCJlbWFpbCI6Im5ld2FkbWluMUBnbWFpbC5jb20iLCJyb2xlIjoiQURNSU4ifQ.D9xm7iAe9sELesh2rDmXErwSsIMvnytN2TXIdCAkECE

# Azure deployed backend (when app is live on Azure App Service)
# @{{baseUrl}} = https://csd-asssignment-g3-1.azurewebsites.net


### 1.1 SG → CN (CIF), Coffee 090111, MFN
POST {{BASE_URL}}/api/v1/calculator/landed-cost
Authorization: Bearer {{JWT}}
Content-Type: application/json

{
  "hsCode": "090111",
  "exporter": "SG",
  "importer": "CN",
  "agreement": "MFN",
  "goods_value": 1200,
  "freight": 150,
  "insurance": 30,
  "effectiveDate": "2025-03-15"
}

### 1.2 SG → US (FOB), Coffee 090111, MFN — freight/insurance should be ignored for FOB lanes
POST {{BASE_URL}}/api/v1/calculate/landed-cost
Authorization: Bearer {{JWT}}
Content-Type: application/json

{
  "hsCode": "090111",
  "exporter": "SG",
  "importer": "US",
  "agreement": "MFN",
  "goods_value": 1200,
  "freight": 150,
  "insurance": 30,
  "effectiveDate": "2025-03-15"
}

### 1.3 SG → JP (CIF), Coffee 090111, CPTPP vs MFN (preferential comparison)
# CPTPP
POST {{BASE_URL}}/api/v1/calculate/landed-cost
Authorization: Bearer {{JWT}}
Content-Type: application/json

{
  "hsCode": "090111",
  "exporter": "SG",
  "importer": "JP",
  "agreement": "CPTPP",
  "goods_value": 1200,
  "freight": 150,
  "insurance": 30,
  "effectiveDate": "2025-03-15"
}

# MFN
POST {{BASE_URL}}/api/v1/calculate/landed-cost
Authorization: Bearer {{JWT}}
Content-Type: application/json

{
  "hsCode": "090111",
  "exporter": "SG",
  "importer": "JP",
  "agreement": "MFN",
  "goods_value": 1200,
  "freight": 150,
  "insurance": 30,
  "effectiveDate": "2025-03-15"
}

### 1.4 Resolve via description (Coffee, not roasted)
POST {{BASE_URL}}/api/v1/calculate/landed-cost
Authorization: Bearer {{JWT}}
Content-Type: application/json

{
  "productDescription": "Coffee, not roasted",
  "exporter": "SG",
  "importer": "CN",
  "agreement": "MFN",
  "goods_value": 1000,
  "freight": 100,
  "insurance": 0,
  "effectiveDate": "2025-07-01"
}

### 1.5 HS & codes with spaces / lowercase → normalized
POST {{BASE_URL}}/api/v1/calculate/landed-cost
Authorization: Bearer {{JWT}}
Content-Type: application/json

{
  "hsCode": " 09 01 11 ",
  "exporter": "sg",
  "importer": "jp",
  "agreement": "mfn",
  "goods_value": 500,
  "freight": 50,
  "insurance": 0,
  "effectiveDate": "2025-06-01"
}

### 5) Validation & error paths

# 5.1 Missing goods_value
POST {{BASE_URL}}/api/v1/calculate/landed-cost
Authorization: Bearer {{JWT}}
Content-Type: application/json

{
  "hsCode": "090111",
  "exporter": "SG",
  "importer": "CN",
  "agreement": "MFN"
}

# 5.2 Negative numbers (should be rejected)
POST {{BASE_URL}}/api/v1/calculate/landed-cost
Authorization: Bearer {{JWT}}
Content-Type: application/json

{
  "hsCode": "090111",
  "exporter": "SG",
  "importer": "CN",
  "agreement": "MFN",
  "goods_value": -1,
  "freight": 0,
  "insurance": 0
}

# 5.3 Missing/blank agreement
POST {{BASE_URL}}/api/v1/calculate/landed-cost
Authorization: Bearer {{JWT}}
Content-Type: application/json

{
  "hsCode": "090111",
  "exporter": "SG",
  "importer": "CN",
  "goods_value": 1000
}

# 5.4 Date before validity (no 2025+ rate expected)
POST {{BASE_URL}}/api/v1/calculate/landed-cost
Authorization: Bearer {{JWT}}
Content-Type: application/json

{
  "hsCode": "090111",
  "exporter": "SG",
  "importer": "CN",
  "agreement": "MFN",
  "goods_value": 1000,
  "effectiveDate": "2024-12-31"
}

# 5.5 Agreement not applicable (CPTPP on SG→US)
POST {{BASE_URL}}/api/v1/calculate/landed-cost
Authorization: Bearer {{JWT}}
Content-Type: application/json

{
  "hsCode": "090111",
  "exporter": "SG",
  "importer": "US",
  "agreement": "CPTPP",
  "goods_value": 1000
}

# 5.6 Unsupported lane (JP exporter not seeded)
POST {{BASE_URL}}/api/v1/calculate/landed-cost
Authorization: Bearer {{JWT}}
Content-Type: application/json

{
  "hsCode": "090111",
  "exporter": "JP",
  "importer": "CN",
  "agreement": "MFN",
  "goods_value": 900
}

# 5.7 Unknown HS code
POST {{BASE_URL}}/api/v1/calculate/landed-cost
Authorization: Bearer {{JWT}}
Content-Type: application/json

{
  "hsCode": "999999",
  "exporter": "SG",
  "importer": "CN",
  "agreement": "MFN",
  "goods_value": 1000
}